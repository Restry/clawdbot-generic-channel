# 更新日志 (CHANGELOG)

## [2.1.0] - 2026-02-05

### ✨ 新增功能

#### 🎨 全新 H5 聊天界面
- 创建了现代化的增强版聊天界面 (`public/h5-chat.html`)
- 采用全新的设计语言，提供更优秀的用户体验
- 响应式设计，完美适配桌面端和移动端

#### 📝 Markdown 完整支持
- **标题支持**：H1-H6 所有级别标题
- **文本样式**：粗体、斜体、删除线、行内代码
- **代码块**：支持多种编程语言的语法高亮
  - JavaScript/TypeScript
  - Python
  - Java/C/C++
  - HTML/CSS
  - JSON/YAML
  - Bash/Shell
  - 更多...
- **列表**：有序列表和无序列表
- **表格**：完整的表格渲染
- **引用块**：美观的引用样式
- **链接和图片**：自动渲染
- **任务列表**：支持 `- [ ]` 和 `- [x]` 语法

#### 💻 代码高亮增强
- 集成 Highlight.js 进行代码语法高亮
- 支持多种主题（当前使用 GitHub Dark 主题）
- 代码块悬停显示复制按钮
- 一键复制代码到剪贴板
- 美观的代码块样式

#### 🌓 深色模式
- 完整的深色主题实现
- 一键切换浅色/深色模式
- 自动保存用户主题偏好到 localStorage
- 所有 UI 元素适配深色模式
- 护眼的配色方案

#### 👥 群组聊天增强
- 在设置中可选择聊天类型（私聊/群聊）
- 群组消息显示发送者名称
- 更好的群组对话体验
- 支持群组历史记录管理

#### 🎯 用户体验优化
- **自动调整输入框**：输入框高度根据内容自动调整
- **流畅动画**：消息、模态框、通知都有优雅的动画效果
- **更好的状态指示**：连接状态、思考状态都有清晰的视觉反馈
- **键盘快捷键**：
  - `Enter` 发送消息
  - `Shift+Enter` 换行
  - `ESC` 关闭模态框

### 📁 目录结构重组

#### 新建目录
- **`public/`**：新建前端资源目录
  - `h5-chat.html`：增强版聊天界面
  - `README.md`：前端详细文档
  - `css/`：CSS 文件目录（预留）
  - `js/`：JavaScript 文件目录（预留）
  - `assets/`：静态资源目录（预留）

#### 文档更新
- 新增 `DIRECTORY_STRUCTURE.md`：完整的目录结构说明
- 更新 `README.md`：添加新功能介绍和使用指南
- 新增 `public/README.md`：前端专用文档

### 🔧 改进

#### UI/UX 改进
- **现代化配色**：使用更现代的颜色方案
- **卡片式设计**：消息气泡采用卡片式设计
- **渐变效果**：主按钮和头部使用渐变色
- **阴影效果**：增加层次感和深度
- **更好的排版**：优化字体大小、行高、间距

#### 性能优化
- Markdown 渲染优化
- 代码高亮按需加载
- 减少不必要的 DOM 操作
- 优化动画性能

#### 代码质量
- 更清晰的代码组织
- 更好的注释和文档
- 遵循最佳实践

### 📚 文档

#### 新增文档
- `public/README.md`：前端完整使用指南
- `DIRECTORY_STRUCTURE.md`：目录结构说明
- `CHANGELOG.md`：更新日志（本文件）

#### 更新文档
- `README.md`：更新主文档，添加新功能说明
- `CLAUDE.md`：更新开发指南

### 🐛 修复

- 修复了一些样式兼容性问题
- 改进了错误处理
- 优化了 WebSocket 重连逻辑

### 📦 依赖

#### 新增外部库（CDN）
- `marked@11.2.0`：Markdown 解析器
- `highlight.js@11.9.0`：代码语法高亮
- `github-markdown-css@5.5.1`：GitHub 风格的 Markdown 样式

**注意**：这些库通过 CDN 加载，不会增加包大小

---

## [2.0.0] - 之前版本

### 核心功能
- WebSocket 和 Webhook 支持
- 私聊和群聊功能
- 富媒体消息（图片、语音、音频）
- 思考指示器
- 消息历史记录
- 访问控制策略
- 自动心跳机制

### 原始 H5 客户端
- 基础的聊天界面
- WebSocket 连接管理
- 文本和媒体消息发送
- 连接状态显示
- 自动重连机制

---

## 版本号说明

遵循语义化版本控制（Semantic Versioning）：

- **主版本号（Major）**：不兼容的 API 修改
- **次版本号（Minor）**：向下兼容的功能性新增
- **修订号（Patch）**：向下兼容的问题修正

---

## 未来规划

### v2.2.0（计划中）
- [ ] 消息搜索功能
- [ ] 表情符号选择器
- [ ] 文件拖拽上传
- [ ] 消息编辑和删除

### v2.3.0（计划中）
- [ ] 消息引用回复
- [ ] @ 提及功能
- [ ] 消息已读状态
- [ ] 多语言支持

### v3.0.0（未来）
- [ ] 分离 CSS 和 JavaScript
- [ ] 创建组件化架构
- [ ] 提供 TypeScript SDK
- [ ] 移动端原生应用支持

---

## 贡献者

感谢所有为这个项目做出贡献的人！

## 许可证

MIT License
