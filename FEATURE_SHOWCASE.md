# 功能展示 (Feature Showcase)

## 🎉 欢迎使用增强版 H5 聊天界面

这是一份详细的功能展示文档，帮助您充分了解和使用新版聊天界面的所有特性。

---

## 📝 Markdown 功能展示

### 1. 标题

在消息中输入：
```markdown
# 一级标题
## 二级标题
### 三级标题
#### 四级标题
##### 五级标题
###### 六级标题
```

效果：从大到小的标题层级，清晰的视觉层次。

### 2. 文本样式

```markdown
**这是粗体文本**
*这是斜体文本*
***这是粗斜体文本***
~~这是删除线文本~~
`这是行内代码`
```

效果：
- **粗体**：强调重要内容
- *斜体*：轻微强调
- ~~删除线~~：标记已废弃内容
- `代码`：标记代码或技术术语

### 3. 列表

#### 无序列表
```markdown
- 项目 1
- 项目 2
  - 子项目 2.1
  - 子项目 2.2
- 项目 3
```

#### 有序列表
```markdown
1. 第一步
2. 第二步
3. 第三步
```

#### 任务列表
```markdown
- [x] 已完成的任务
- [ ] 待完成的任务
- [ ] 另一个待完成的任务
```

### 4. 代码块

#### JavaScript
````markdown
```javascript
function fibonacci(n) {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

console.log(fibonacci(10)); // 55
```
````

#### Python
````markdown
```python
def hello_world():
    print("Hello, World!")

if __name__ == "__main__":
    hello_world()
```
````

#### TypeScript
````markdown
```typescript
interface User {
  id: number;
  name: string;
  email: string;
}

const user: User = {
  id: 1,
  name: "Alice",
  email: "alice@example.com"
};
```
````

### 5. 表格

```markdown
| 姓名 | 年龄 | 职业 |
|------|------|------|
| 张三 | 25 | 工程师 |
| 李四 | 30 | 设计师 |
| 王五 | 28 | 产品经理 |
```

效果：自动渲染为漂亮的表格，支持对齐方式。

对齐方式：
```markdown
| 左对齐 | 居中对齐 | 右对齐 |
|:-------|:--------:|-------:|
| 文本   | 文本     | 文本   |
```

### 6. 引用

```markdown
> 这是一段引用文本。
>
> 可以包含多个段落。
>
> > 嵌套引用
```

效果：带有左侧竖线的引用样式，层次分明。

### 7. 链接

```markdown
[OpenClaw 官方网站](https://docs.openclaw.ai/)
[GitHub 仓库](https://github.com/Restry/clawdbot-generic-channel)
```

### 8. 图片

```markdown
![描述文字](图片URL)
```

### 9. 分隔线

```markdown
---
或
***
或
___
```

### 10. 组合示例

````markdown
## 项目进度报告

### 已完成任务

- [x] 设计 UI 界面
- [x] 实现 Markdown 支持
- [x] 添加深色模式

### 进行中任务

- [ ] 优化性能
- [ ] 添加单元测试

### 关键代码

```javascript
// 初始化聊天界面
function initChat(config) {
  const ws = new WebSocket(config.url);
  ws.onopen = () => console.log('Connected!');
  return ws;
}
```

### 团队成员

| 成员 | 角色 | 进度 |
|------|------|------|
| Alice | 前端开发 | 90% |
| Bob | 后端开发 | 85% |

> **注意**：请在周五前完成所有任务。
````

---

## 🎨 深色模式

### 如何切换

1. **点击主题按钮**：在侧边栏或右上角找到 🌓 按钮
2. **一键切换**：点击即可在浅色和深色模式间切换
3. **自动保存**：您的选择会自动保存，下次访问时生效

### 深色模式特点

- ✅ **护眼设计**：降低屏幕亮度，减少眼睛疲劳
- ✅ **完整适配**：所有UI元素都适配深色模式
- ✅ **代码高亮**：代码块在深色模式下也有优秀的显示效果
- ✅ **对比度优化**：确保文字清晰可读

### 配色方案

#### 浅色模式
- 背景：白色系
- 文字：深灰色系
- 强调色：蓝紫色渐变

#### 深色模式
- 背景：深灰色系
- 文字：浅灰色系
- 强调色：亮蓝紫色渐变

---

## 👥 群组聊天功能

### 创建群组对话

1. 打开设置（⚙️）
2. 选择"聊天类型"为"群聊 (Group)"
3. 输入群组 ID（如：`group-tech-team`）
4. 输入您的用户名
5. 点击连接

### 群组特性

#### 发送者识别
每条消息都会显示发送者名称：
```
[张三] 15:30
大家好！今天的任务进展如何？
```

#### 历史记录
- 自动保存最近的群组消息
- 新成员加入可以看到历史上下文
- 可配置历史记录数量（默认10条）

#### 多人在线
- 支持多个成员同时在线
- 实时消息同步
- 无延迟通信

### 群聊使用场景

1. **技术讨论**
   - 代码审查
   - 架构讨论
   - 问题排查

2. **团队协作**
   - 项目进度同步
   - 任务分配
   - 快速沟通

3. **知识分享**
   - 技术文档分享
   - 最佳实践讨论
   - 学习资源交流

---

## 💻 代码展示增强

### 语法高亮

支持的编程语言包括但不限于：

1. **Web 开发**
   - JavaScript / TypeScript
   - HTML / CSS
   - JSON / YAML

2. **后端语言**
   - Python
   - Java / Kotlin
   - Go
   - Rust
   - C / C++
   - C#

3. **脚本语言**
   - Bash / Shell
   - PowerShell
   - Ruby
   - PHP

4. **数据库**
   - SQL
   - MongoDB Query

### 代码块功能

#### 自动高亮
无需手动操作，代码会自动识别语言并高亮：

````markdown
```python
def hello():
    print("Hello!")
```
````

#### 一键复制
1. 将鼠标悬停在代码块上
2. 点击右上角的"复制"按钮
3. 代码已复制到剪贴板
4. 按钮会显示"已复制!"确认

#### 长代码处理
- 自动添加横向滚动条
- 保持代码格式不变
- 不会破坏页面布局

### 代码展示最佳实践

1. **指定语言**
   总是指定语言以获得最佳高亮效果：
   ````markdown
   ```javascript
   // 您的代码
   ```
   ````

2. **添加注释**
   在代码中添加注释说明：
   ```javascript
   // 初始化配置
   const config = {
     port: 8080,
     host: 'localhost'
   };
   ```

3. **格式化代码**
   发送前确保代码格式正确：
   - 正确的缩进
   - 合理的换行
   - 清晰的结构

---

## 📱 响应式设计

### 桌面端体验（> 768px）

#### 布局
- **侧边栏**：300px 宽度，显示对话列表
- **主聊天区**：剩余空间，显示消息和输入框
- **最大宽度**：1600px，居中显示

#### 特点
- 双栏布局，信息一目了然
- 大屏幕充分利用空间
- 鼠标悬停效果丰富

### 移动端体验（≤ 768px）

#### 布局
- **隐藏侧边栏**：点击按钮展开
- **全屏聊天**：占满整个屏幕
- **优化触摸**：按钮和输入框更大

#### 特点
- 单栏布局，专注当前对话
- 触摸优化，操作更便捷
- 适配各种屏幕尺寸

### 平板体验（768px - 1024px）

介于桌面和移动之间，自动适配最佳布局。

---

## ⌨️ 键盘快捷键

### 消息输入

| 快捷键 | 功能 |
|--------|------|
| `Enter` | 发送消息 |
| `Shift + Enter` | 换行 |
| `Ctrl + A` | 全选文本 |

### 界面操作

| 快捷键 | 功能 |
|--------|------|
| `ESC` | 关闭模态框 |

### 提示

- Mac 用户：`Ctrl` 替换为 `Cmd`
- 快捷键在所有平台保持一致

---

## 🎯 输入框增强

### 自动调整高度

输入框会根据内容自动调整高度：
- **单行**：默认高度
- **多行**：自动扩展（最高 150px）
- **超长**：显示滚动条

### Markdown 预览

虽然输入框显示原始文本，但发送后会渲染为 Markdown。

### 使用技巧

1. **长消息**
   ```markdown
   使用 Shift+Enter 换行
   编辑多行内容
   然后一次发送
   ```

2. **代码消息**
   ````markdown
   先输入三个反引号和语言名
   然后输入代码
   最后三个反引号结束
   ````

3. **快速格式化**
   - 粗体：选中文字，输入 `**`
   - 斜体：选中文字，输入 `*`
   - 代码：选中文字，输入 `` ` ``

---

## 🔔 通知系统

### 通知类型

1. **成功通知**（绿色）
   - 连接成功
   - 主题切换成功
   - 操作完成

2. **错误通知**（红色）
   - 连接失败
   - 操作失败
   - 参数错误

3. **信息通知**（蓝色）
   - 重连提示
   - 状态更新
   - 一般信息

### 特点

- **自动消失**：3秒后自动关闭
- **位置固定**：右上角，不遮挡内容
- **动画流畅**：滑入滑出效果
- **可堆叠**：多个通知不会重叠

---

## 🎭 动画效果

### 消息动画

- **进入**：从下方滑入，淡入效果
- **平滑**：使用 CSS 动画，性能优秀
- **自然**：符合用户预期的动画时长

### 模态框动画

- **背景**：淡入效果
- **内容**：从下向上滑入
- **关闭**：反向动画

### 状态动画

- **连接中**：脉动动画
- **思考中**：跳动的圆点
- **录音中**：脉动的红色按钮

---

## 🔧 高级功能

### 本地存储

自动保存以下配置：
- WebSocket 服务器地址
- 聊天 ID
- 用户名
- 聊天类型
- 主题偏好

### 连接管理

#### 自动重连
- 断开后自动尝试重连
- 最多尝试 5 次
- 使用指数退避策略（延迟递增）

#### 手动断开
- 点击断开按钮
- 停止自动重连
- 清理连接状态

### 媒体处理

#### 图片
- 支持 PNG、JPG、GIF 等格式
- 自动压缩（保持质量）
- 点击查看大图

#### 语音
- 浏览器原生录音
- WebM 格式
- 支持预览和播放

---

## 💡 使用技巧

### 1. 快速开始对话

```
1. 点击设置 ⚙️
2. 输入：ws://localhost:8080/ws
3. 聊天 ID：随意输入（如 user-001）
4. 用户名：您的名字
5. 点击连接
6. 开始聊天！
```

### 2. 发送带代码的消息

````
请帮我看看这段代码有什么问题：

```javascript
function add(a, b) {
  return a + b;
}
```

这个函数应该如何优化？
````

### 3. 创建清晰的列表

```markdown
今天的待办事项：

1. [ ] 完成项目文档
2. [ ] Review PR #123
3. [ ] 准备周会内容

已完成：
- [x] 修复登录 bug
- [x] 优化数据库查询
```

### 4. 使用表格整理信息

```markdown
本周进度：

| 任务 | 负责人 | 状态 | 完成度 |
|------|--------|------|--------|
| UI 设计 | Alice | 进行中 | 80% |
| 后端 API | Bob | 已完成 | 100% |
| 测试 | Charlie | 待开始 | 0% |
```

### 5. 深色模式的使用场景

- **夜间工作**：减少眼睛疲劳
- **暗光环境**：避免屏幕过亮
- **个人偏好**：喜欢深色界面

---

## 📚 常见问题

### Q: Markdown 不生效？

**A**: 确保：
1. AI 返回的 `contentType` 为 `markdown`
2. 语法正确（注意空格和换行）
3. 浏览器支持（建议使用 Chrome/Firefox 最新版）

### Q: 代码高亮不显示？

**A**: 检查：
1. 代码块是否正确闭合（三个反引号）
2. 是否指定了语言名称
3. 网络是否正常（需要加载 CDN 资源）

### Q: 深色模式不工作？

**A**: 尝试：
1. 清除浏览器缓存
2. 检查 localStorage 权限
3. 刷新页面

### Q: 输入框不能换行？

**A**: 使用 `Shift + Enter` 换行，单独按 `Enter` 会发送消息。

### Q: 图片无法发送？

**A**: 确认：
1. 图片大小 < 10MB
2. 格式为常见图片格式
3. WebSocket 连接正常

---

## 🎉 最佳实践

### 技术讨论

```markdown
## 问题描述

登录接口返回 500 错误

## 错误信息

```json
{
  "error": "Internal Server Error",
  "code": 500
}
```

## 相关代码

```javascript
async function login(username, password) {
  const response = await fetch('/api/login', {
    method: 'POST',
    body: JSON.stringify({ username, password })
  });
  return response.json();
}
```

## 可能的原因

1. 数据库连接失败
2. 密码加密错误
3. Session 初始化问题
```

### 项目汇报

```markdown
# 本周工作总结

## 已完成

- [x] 实现用户认证模块
- [x] 优化数据库查询性能（提升 50%）
- [x] 修复 3 个 bug

## 进行中

- [ ] 实现文件上传功能（预计明天完成）

## 下周计划

1. 完成支付接口对接
2. 进行压力测试
3. 准备发布文档

## 遇到的问题

> 文件上传时内存占用过高，需要优化分块上传逻辑
```

---

## 🚀 进阶技巧

### 1. 组合 Markdown 语法

```markdown
### **重要更新** 🎉

我们刚刚发布了新版本，主要改进：

1. **性能优化**
   - 加载速度提升 ~~30%~~ 50%！
   - 内存占用降低 40%

2. **新功能**
   ```javascript
   // 新增的 API
   const result = await api.newFeature();
   ```

3. **Bug 修复**
   | Bug ID | 描述 | 状态 |
   |--------|------|------|
   | #123 | 登录失败 | ✅ 已修复 |
   | #124 | 样式错误 | ✅ 已修复 |

> 感谢所有用户的反馈！
```

### 2. 使用 HTML（Markdown 支持部分 HTML）

```markdown
<details>
<summary>点击展开详细信息</summary>

这里是详细内容...

</details>
```

### 3. 创建检查清单

```markdown
## 发布前检查

- [x] 代码审查完成
- [x] 测试通过
- [x] 文档更新
- [ ] 备份数据库
- [ ] 通知用户
```

---

## 📖 学习资源

### Markdown 学习

- [Markdown 官方教程](https://markdown.com.cn/)
- [GitHub Markdown 指南](https://guides.github.com/features/mastering-markdown/)

### 代码高亮

- [Highlight.js 支持的语言](https://highlightjs.org/static/demo/)

### OpenClaw 文档

- [官方文档](https://docs.openclaw.ai/)

---

## 🎊 结语

感谢使用 Generic Channel 增强版 H5 聊天界面！

我们希望这些功能能让您的沟通更加高效、愉快。如果您有任何建议或问题，欢迎：

- 提交 GitHub Issue
- 发起 Pull Request
- 联系项目维护者

**祝您使用愉快！** 🚀
